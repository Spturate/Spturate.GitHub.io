"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function initTOC(){KEEP.utils.navItems=document.querySelectorAll(".post-toc-wrap .post-toc li"),0<KEEP.utils.navItems.length?(KEEP.utils=_objectSpread(_objectSpread({},KEEP.utils),{},{findActiveIndexByTOC:function(){var e;Array.isArray(KEEP.utils.sections)&&(-1===(e=KEEP.utils.sections.findIndex(function(e){return e&&0<e.getBoundingClientRect().top-20}))?e=KEEP.utils.sections.length-1:0<e&&e--,this.activateNavByIndex(e))},registerSidebarTOC:function(){KEEP.utils.sections=_toConsumableArray(document.querySelectorAll(".post-toc li a.nav-link")).map(function(e){var t=document.getElementById(decodeURI(e.getAttribute("href")).replace("#",""));return e.addEventListener("click",function(e){e.preventDefault();e=t.getBoundingClientRect().top+window.scrollY;window.anime({targets:document.scrollingElement,duration:500,easing:"linear",scrollTop:e-10,complete:function(){setTimeout(function(){KEEP.utils.pageTop_dom.classList.add("hide")},100)}})}),t})},activateNavByIndex:function(e){var t=document.querySelectorAll(".post-toc li a.nav-link")[e];if(t&&!t.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(function(e){e.classList.remove("active","active-current")}),t.classList.add("active","active-current");for(var r=t.parentNode;!r.matches(".post-toc");)r.matches("li")&&r.classList.add("active"),r=r.parentNode;e=document.querySelector(".post-toc-wrap");window.anime({targets:e,duration:200,easing:"linear",scrollTop:e.scrollTop-e.offsetHeight/2+t.getBoundingClientRect().top-e.getBoundingClientRect().top})}},showPageAsideWhenHasTOC:function(){function e(){var e=KEEP.getStyleStatus(),t="isOpenPageAside";e&&e.hasOwnProperty(t)?KEEP.utils.leftSideToggle.pageAsideHandleOfTOC(e[t]):KEEP.utils.leftSideToggle.pageAsideHandleOfTOC(!0)}var t="init_open";!KEEP.theme_config.toc.hasOwnProperty(t)||KEEP.theme_config.toc[t]?e():KEEP.utils.leftSideToggle.pageAsideHandleOfTOC(!1)}}),KEEP.utils.showPageAsideWhenHasTOC(),KEEP.utils.registerSidebarTOC()):KEEP.utils.pageContainer_dom.removeChild(document.querySelector(".page-aside"))}!0===KEEP.theme_config.pjax.enable&&KEEP.utils?initTOC():window.addEventListener("DOMContentLoaded",initTOC);